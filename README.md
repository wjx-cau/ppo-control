# ğŸ¤– å¼ºåŒ–å­¦ä¹ æœºæ¢°è‡‚æ§åˆ¶ç³»ç»Ÿ

<div align="center">

**ä½¿ç”¨ PPO ç®—æ³•è®­ç»ƒ 3-DoF æœºæ¢°è‡‚è‡ªä¸»æ¥è§¦ç›®æ ‡å¶ç‰‡**

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![PyBullet](https://img.shields.io/badge/PyBullet-3.2.5+-green.svg)](https://pybullet.org/)
[![Stable-Baselines3](https://img.shields.io/badge/SB3-2.0+-orange.svg)](https://stable-baselines3.readthedocs.io/)

</div>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†ä½¿ç”¨æŒ‡å—](#è¯¦ç»†ä½¿ç”¨æŒ‡å—)
- [ç¯å¢ƒè®¾è®¡](#ç¯å¢ƒè®¾è®¡)
- [è®­ç»ƒæŠ€å·§](#è®­ç»ƒæŠ€å·§)
- [ç»“æœåˆ†æ](#ç»“æœåˆ†æ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è¿›é˜¶ä¼˜åŒ–](#è¿›é˜¶ä¼˜åŒ–)
- [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªåŸºäº**æ·±åº¦å¼ºåŒ–å­¦ä¹ **çš„ 3 è‡ªç”±åº¦æœºæ¢°è‡‚æ§åˆ¶ç³»ç»Ÿï¼Œä½¿ç”¨ **PPO (Proximal Policy Optimization)** ç®—æ³•è®­ç»ƒæ™ºèƒ½ä½“ï¼Œè®©æœºæ¢°è‡‚å­¦ä¼šè‡ªä¸»è§„åˆ’è½¨è¿¹å¹¶ç²¾å‡†æ¥è§¦ç›®æ ‡å¶ç‰‡ã€‚

![demo](assets/img/1)

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **ç‰©ç†å¼•æ“**: PyBulletï¼ˆå®æ—¶åˆšä½“ç‰©ç†ä»¿çœŸï¼‰
- **å¼ºåŒ–å­¦ä¹ æ¡†æ¶**: Stable-Baselines3
- **æ·±åº¦å­¦ä¹ **: PyTorchï¼ˆç¥ç»ç½‘ç»œåç«¯ï¼‰
- **ç¯å¢ƒæ¥å£**: Gymnasiumï¼ˆOpenAI Gym æ ‡å‡†ï¼‰

### åº”ç”¨åœºæ™¯

- ğŸŒ± å†œä¸šæœºå™¨äººï¼ˆé‡‡æ‘˜ã€ä¿®å‰ªï¼‰

- ğŸ­ å·¥ä¸šè£…é…ï¼ˆç²¾å‡†å®šä½ï¼‰

- ğŸ”¬ å®éªŒå®¤è‡ªåŠ¨åŒ–ï¼ˆæ ·æœ¬æ“ä½œï¼‰

  ![æˆªå±2025-10-14 ä¸‹åˆ5.49.16](/Users/wjx_macair/Desktop/æˆªå±2025-10-14 ä¸‹åˆ5.49.16.png)

- ğŸ“š å¼ºåŒ–å­¦ä¹ æ•™å­¦æ¼”ç¤º

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

- âœ… **å®Œæ•´çš„ RL è®­ç»ƒæµç¨‹**ï¼šä»é›¶å¼€å§‹è®­ç»ƒåˆ°æ¨¡å‹ä¿å­˜
- âœ… **å®æ—¶å¯è§†åŒ–**ï¼šGUI æ˜¾ç¤ºè®­ç»ƒè¿›åº¦å’Œæµ‹è¯•æ•ˆæœ
- âœ… **æ…¢é€Ÿæ¼”ç¤ºæ¨¡å¼**ï¼šæ¸…æ™°è§‚å¯Ÿæ¯ä¸€æ­¥å†³ç­–è¿‡ç¨‹
- âœ… **è‡ªåŠ¨æ£€æŸ¥ç‚¹ä¿å­˜**ï¼šæ¯ 10,000 æ­¥è‡ªåŠ¨ä¿å­˜æ¨¡å‹
- âœ… **TensorBoard ç›‘æ§**ï¼šå®æ—¶æŸ¥çœ‹è®­ç»ƒæ›²çº¿
- âœ… **100% æˆåŠŸç‡**ï¼šè®­ç»ƒåæ™ºèƒ½ä½“ç¨³å®šå®Œæˆä»»åŠ¡
- âœ… **é«˜æ•ˆå­¦ä¹ **ï¼š5-10 ä¸‡æ­¥å³å¯è¾¾åˆ°è‰¯å¥½æ•ˆæœ

### ğŸ® äº¤äº’åŠŸèƒ½

- ğŸ–¥ï¸ **GUI å¯è§†åŒ–**ï¼šå®æ—¶æ˜¾ç¤ºæ­¥æ•°ã€è·ç¦»ã€æˆåŠŸçŠ¶æ€
- ğŸ“Š **å®æ—¶ç»Ÿè®¡**ï¼šæ¯ 5 æ­¥è¾“å‡ºè·ç¦»å˜åŒ–
- ğŸ¨ **é¢œè‰²æ ‡æ³¨**ï¼šé»„è‰²çŠ¶æ€ã€ç»¿è‰²æˆåŠŸæç¤º
- â±ï¸ **é€Ÿåº¦æ§åˆ¶**ï¼šå¯è°ƒèŠ‚æ¼”ç¤ºé€Ÿåº¦ï¼ˆ60Hz + é¢å¤–å»¶è¿Ÿï¼‰

---

## ğŸ’» ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚

- **CPU**: ä»»æ„ç°ä»£ CPUï¼ˆæ”¯æŒ x86_64 æˆ– ARMï¼‰
- **å†…å­˜**: æœ€ä½ 4GBï¼ˆæ¨è 8GB+ï¼‰
- **GPU**: å¯é€‰ï¼ˆApple Silicon æ”¯æŒ MPS åŠ é€Ÿï¼‰
- **å­˜å‚¨**: è‡³å°‘ 500MB ç©ºé—²ç©ºé—´

### è½¯ä»¶è¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: macOS / Linux / Windows
- **Python**: 3.8 - 3.12
- **Conda**: æ¨èä½¿ç”¨ Miniconda/Anaconda

### æ”¯æŒçš„åŠ é€Ÿ

- âœ… Apple M1/M2/M3/M4 (MPS)
- âœ… NVIDIA CUDA
- âœ… CPUï¼ˆé€šç”¨æ”¯æŒï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Condaï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n bullet312 python=3.12 -y
conda activate bullet312

# å®‰è£…ä¾èµ–
pip install pybullet stable-baselines3 gymnasium tensorboard
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨ pip

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install pybullet stable-baselines3 gymnasium tensorboard
```

### 2. å…‹éš†/ä¸‹è½½é¡¹ç›®

```bash
cd /path/to/your/workspace
# å‡è®¾é¡¹ç›®åœ¨ TEST/pybullt ç›®å½•
```

### 3. å¿«é€Ÿè®­ç»ƒï¼ˆ5 ä¸‡æ­¥æ¼”ç¤ºï¼‰

```bash
cd TEST/pybullt
python rl_train.py --train --timesteps 50000
```

**é¢„æœŸè¾“å‡º**ï¼š
```
============================================================
å¼€å§‹è®­ç»ƒå¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“
============================================================
å…³èŠ‚æ•°: 4, æœ«ç«¯é“¾æ¥ç´¢å¼•: 3
Using cpu device

å¼€å§‹è®­ç»ƒ 50000 æ­¥...
Logging to ./ppo_arm_tensorboard/PPO_1
-----------------------------
| time/              |      |
|    fps             | 4589 |
|    iterations      | 1    |
|    time_elapsed    | 0    |
|    total_timesteps | 2048 |
-----------------------------
...
è®­ç»ƒå®Œæˆï¼æ¨¡å‹å·²ä¿å­˜åˆ° ppo_arm_final.zip
```

### 4. æµ‹è¯•è®­ç»ƒå¥½çš„æ¨¡å‹

```bash
python rl_train.py --test --episodes 3
```

**é¢„æœŸç»“æœ**ï¼š
- å¼¹å‡º PyBullet GUI çª—å£
- æœºæ¢°è‡‚è‡ªä¸»ç§»åŠ¨æ¥è¿‘ç»¿è‰²å¶ç‰‡
- æ˜¾ç¤ºå®æ—¶æ­¥æ•°å’Œè·ç¦»
- æˆåŠŸæ¥è§¦åæ˜¾ç¤ºç»¿è‰²æç¤º

---

## ğŸ“– è¯¦ç»†ä½¿ç”¨æŒ‡å—

### è®­ç»ƒæ¨¡å¼

#### åŸºç¡€è®­ç»ƒ

```bash
python rl_train.py --train --timesteps 200000
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | æ¨èå€¼ |
|------|------|--------|--------|
| `--timesteps` | æ€»è®­ç»ƒæ­¥æ•° | 200000 | åˆå­¦: 50000<br>æ ‡å‡†: 200000<br>ç²¾è°ƒ: 500000+ |

#### è®­ç»ƒè¾“å‡º

```
é¡¹ç›®ç›®å½•/
â”œâ”€â”€ ppo_arm_final.zip           # æœ€ç»ˆè®­ç»ƒæ¨¡å‹
â”œâ”€â”€ vec_normalize.pkl           # å½’ä¸€åŒ–å‚æ•°
â”œâ”€â”€ checkpoints/                # ä¸­é—´æ£€æŸ¥ç‚¹
â”‚   â”œâ”€â”€ ppo_arm_10000_steps.zip
â”‚   â”œâ”€â”€ ppo_arm_20000_steps.zip
â”‚   â””â”€â”€ ...
â””â”€â”€ ppo_arm_tensorboard/        # TensorBoard æ—¥å¿—
    â””â”€â”€ PPO_1/
        â””â”€â”€ events.out.tfevents...
```

### æµ‹è¯•æ¨¡å¼

#### åŸºç¡€æµ‹è¯•

```bash
python rl_train.py --test --episodes 5
```

#### æµ‹è¯•ä¸åŒæ£€æŸ¥ç‚¹

```bash
# æµ‹è¯• 10000 æ­¥çš„æ¨¡å‹
python rl_train.py --test --model-path checkpoints/ppo_arm_10000_steps --episodes 3

# æµ‹è¯• 50000 æ­¥çš„æ¨¡å‹
python rl_train.py --test --model-path checkpoints/ppo_arm_50000_steps --episodes 3
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--episodes` | æµ‹è¯•å›åˆæ•° | 5 |
| `--model-path` | æ¨¡å‹è·¯å¾„ | `ppo_arm_final` |

### TensorBoard ç›‘æ§

#### å¯åŠ¨ TensorBoard

```bash
tensorboard --logdir ./ppo_arm_tensorboard/
```

#### è®¿é—®ç•Œé¢

æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:6006

#### å¯æŸ¥çœ‹çš„æŒ‡æ ‡

- **train/loss**: ç­–ç•¥æŸå¤±
- **train/policy_gradient_loss**: ç­–ç•¥æ¢¯åº¦æŸå¤±
- **train/value_loss**: ä»·å€¼å‡½æ•°æŸå¤±
- **train/entropy_loss**: ç†µæŸå¤±ï¼ˆæ¢ç´¢åº¦ï¼‰
- **train/approx_kl**: KL æ•£åº¦ï¼ˆç­–ç•¥å˜åŒ–ï¼‰
- **train/clip_fraction**: è£å‰ªæ¯”ä¾‹
- **rollout/ep_rew_mean**: å¹³å‡å›åˆå¥–åŠ±

---

## ğŸ¨ ç¯å¢ƒè®¾è®¡

### æœºæ¢°è‡‚ç»“æ„

```
        â”Œâ”€â”€â”€â”€â”€â”€â”
        â”‚  EE  â”‚ â† æœ«ç«¯æ‰§è¡Œå™¨ï¼ˆçº¢è‰²å°æ–¹å—ï¼‰
        â””â”€â”€â”¬â”€â”€â”€â”˜
           â”‚
       â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
       â”‚ Link3  â”‚ â† ç¬¬ä¸‰æ®µè¿æ†ï¼ˆç»¿è‰²ï¼ŒL=0.16mï¼‰
       â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚ J3 (Yè½´)
       â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
       â”‚ Link2  â”‚ â† ç¬¬äºŒæ®µè¿æ†ï¼ˆæ©™è‰²ï¼ŒL=0.18mï¼‰
       â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚ J2 (Yè½´)
       â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
       â”‚ Link1  â”‚ â† ç¬¬ä¸€æ®µè¿æ†ï¼ˆè“è‰²ï¼ŒL=0.22mï¼‰
       â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚ J1 (Zè½´)
       â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
       â”‚  Base  â”‚ â† åŸºåº§ï¼ˆç°è‰²ï¼Œå›ºå®šï¼‰
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³èŠ‚é™åˆ¶

| å…³èŠ‚ | è½´å‘ | èŒƒå›´ï¼ˆåº¦ï¼‰ | èŒƒå›´ï¼ˆå¼§åº¦ï¼‰ | ç”¨é€” |
|------|------|-----------|-------------|------|
| J1 | Z | -180Â° ~ 180Â° | -Ï€ ~ Ï€ | æ°´å¹³æ—‹è½¬ï¼ˆyawï¼‰ |
| J2 | Y | -100Â° ~ 100Â° | -1.745 ~ 1.745 | ä¿¯ä»°ï¼ˆpitchï¼‰ |
| J3 | Y | -120Â° ~ 120Â° | -2.094 ~ 2.094 | ä¿¯ä»°ï¼ˆpitchï¼‰ |

### è§‚å¯Ÿç©ºé—´ï¼ˆ13ç»´ï¼‰

```python
Observation = [
    joint_angle_1,    # J1 è§’åº¦ (rad)
    joint_angle_2,    # J2 è§’åº¦ (rad)
    joint_angle_3,    # J3 è§’åº¦ (rad)
    joint_vel_1,      # J1 è§’é€Ÿåº¦ (rad/s)
    joint_vel_2,      # J2 è§’é€Ÿåº¦ (rad/s)
    joint_vel_3,      # J3 è§’é€Ÿåº¦ (rad/s)
    ee_pos_x,         # æœ«ç«¯ X åæ ‡ (m)
    ee_pos_y,         # æœ«ç«¯ Y åæ ‡ (m)
    ee_pos_z,         # æœ«ç«¯ Z åæ ‡ (m)
    target_x,         # ç›®æ ‡ X åæ ‡ (m) = 0.35
    target_y,         # ç›®æ ‡ Y åæ ‡ (m) = 0.0
    target_z,         # ç›®æ ‡ Z åæ ‡ (m) = 0.35
    distance          # æœ«ç«¯åˆ°ç›®æ ‡çš„æ¬§æ°è·ç¦» (m)
]
```

### åŠ¨ä½œç©ºé—´ï¼ˆ3ç»´ï¼‰

```python
Action = [
    delta_angle_1,    # J1 è§’åº¦å¢é‡ (-0.1 ~ 0.1 rad)
    delta_angle_2,    # J2 è§’åº¦å¢é‡ (-0.1 ~ 0.1 rad)
    delta_angle_3     # J3 è§’åº¦å¢é‡ (-0.1 ~ 0.1 rad)
]
```

**æ³¨æ„**ï¼šåŠ¨ä½œæ˜¯å¢é‡å¼çš„ï¼Œæ¯æ­¥åœ¨å½“å‰è§’åº¦åŸºç¡€ä¸Šè°ƒæ•´ã€‚

### å¥–åŠ±å‡½æ•°

#### è·ç¦»å¥–åŠ±ï¼ˆä¸»è¦é©±åŠ¨åŠ›ï¼‰

```python
distance_reward = -distance Ã— 10.0
```

- è·ç¦»è¶Šå°ï¼Œå¥–åŠ±è¶Šé«˜ï¼ˆæƒ©ç½šè¶Šå°ï¼‰
- é¼“åŠ±æ™ºèƒ½ä½“æ¥è¿‘ç›®æ ‡

#### è¿›æ­¥å¥–åŠ±ï¼ˆåŠ é€Ÿæ”¶æ•›ï¼‰

```python
progress_reward = (prev_distance - curr_distance) Ã— 50.0
```

- æ¯æ­¥æ›´æ¥è¿‘ç›®æ ‡ â†’ è·å¾—é¢å¤–å¥–åŠ±
- æ¯æ­¥è¿œç¦»ç›®æ ‡ â†’ è·å¾—é¢å¤–æƒ©ç½š

#### åˆ°è¾¾å¥–åŠ±ï¼ˆé‡Œç¨‹ç¢‘ï¼‰

```python
if distance < 0.05:  # 5cmå†…
    reach_reward = 50.0
if distance < 0.02:  # 2cmå†…
    reach_reward = 100.0
```

#### æ¥è§¦å¥–åŠ±ï¼ˆç»ˆæç›®æ ‡ï¼‰

```python
if end_effector_touches_leaf:
    contact_reward = 100.0
    success = True
```

#### æ€»å¥–åŠ±

```python
total_reward = distance_reward + progress_reward + reach_reward + contact_reward
```

### ç»ˆæ­¢æ¡ä»¶

1. **æˆåŠŸç»ˆæ­¢**ï¼šæœ«ç«¯æ‰§è¡Œå™¨æ¥è§¦åˆ°å¶ç‰‡
2. **è¶…æ—¶ç»ˆæ­¢**ï¼šè¾¾åˆ°æœ€å¤§æ­¥æ•°ï¼ˆ500 æ­¥ï¼‰

---

## ğŸ“ è®­ç»ƒæŠ€å·§

### åˆçº§é˜¶æ®µï¼ˆ0 - 5ä¸‡æ­¥ï¼‰

**ç›®æ ‡**ï¼šå­¦ä¹ åŸºæœ¬è¿åŠ¨æ§åˆ¶

- âœ… æ™ºèƒ½ä½“å¼€å§‹ç†è§£å…³èŠ‚å¦‚ä½•å½±å“æœ«ç«¯ä½ç½®
- âœ… å‡ºç°å‘ç›®æ ‡æ–¹å‘çš„è¶‹åŠ¿
- âœ… å¶å°”èƒ½æ¥è¿‘ç›®æ ‡åŒºåŸŸ

**ç‰¹å¾**ï¼š
- æˆåŠŸç‡ï¼š0% - 20%
- å¹³å‡æ­¥æ•°ï¼š300+
- è½¨è¿¹ï¼šæ‚ä¹±æ— ç« ï¼Œå¤§é‡æ¢ç´¢

### ä¸­çº§é˜¶æ®µï¼ˆ5ä¸‡ - 15ä¸‡æ­¥ï¼‰

**ç›®æ ‡**ï¼šæé«˜æˆåŠŸç‡å’Œæ•ˆç‡

- âœ… ç¨³å®šæ¥è¿‘ç›®æ ‡
- âœ… æˆåŠŸç‡æ˜¾è‘—æå‡
- âœ… è½¨è¿¹å¼€å§‹ä¼˜åŒ–

**ç‰¹å¾**ï¼š
- æˆåŠŸç‡ï¼š20% - 70%
- å¹³å‡æ­¥æ•°ï¼š100 - 200
- è½¨è¿¹ï¼šæœ‰æ˜æ˜¾è§„åˆ’ï¼Œä½†è¿˜æœ‰æŠ–åŠ¨

### é«˜çº§é˜¶æ®µï¼ˆ15ä¸‡ - 30ä¸‡æ­¥ï¼‰

**ç›®æ ‡**ï¼šç²¾è°ƒç­–ç•¥ï¼Œæå‡ç¨³å®šæ€§

- âœ… é«˜æˆåŠŸç‡ï¼ˆ> 80%ï¼‰
- âœ… å¿«é€Ÿå®Œæˆï¼ˆ< 100 æ­¥ï¼‰
- âœ… å¹³æ»‘è½¨è¿¹

**ç‰¹å¾**ï¼š
- æˆåŠŸç‡ï¼š70% - 100%
- å¹³å‡æ­¥æ•°ï¼š50 - 100
- è½¨è¿¹ï¼šæµç•…ç›´æ¥

### è¶…å‚æ•°è°ƒä¼˜å»ºè®®

#### å­¦ä¹ ç‡è°ƒæ•´

```python
# è®­ç»ƒæ—©æœŸ - å¿«é€Ÿå­¦ä¹ 
learning_rate = 3e-4  # é»˜è®¤

# å¾®è°ƒé˜¶æ®µ - ç¨³å®šä¼˜åŒ–
learning_rate = 1e-4

# ç²¾ç»†è°ƒæ•´
learning_rate = 3e-5
```

#### Batch Size å½±å“

```python
# å° batchï¼ˆæ›´æ–°é¢‘ç¹ï¼Œé€‚åˆåˆæœŸï¼‰
batch_size = 32

# ä¸­ batchï¼ˆå¹³è¡¡ï¼‰
batch_size = 64  # é»˜è®¤

# å¤§ batchï¼ˆç¨³å®šä½†æ…¢ï¼‰
batch_size = 128
```

#### æ¢ç´¢åº¦æ§åˆ¶

```python
# é«˜æ¢ç´¢ï¼ˆè®­ç»ƒåˆæœŸï¼‰
ent_coef = 0.01  # é»˜è®¤

# ä½æ¢ç´¢ï¼ˆæ”¶æ•›åï¼‰
ent_coef = 0.001
```

---

## ğŸ“Š ç»“æœåˆ†æ

### è®­ç»ƒæ›²çº¿è§£è¯»

#### ç†æƒ³æ›²çº¿

```
å¥–åŠ±å€¼
  â”‚
  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚    â•±
  â”‚   â•±
  â”‚  â•±
  â”‚ â•±
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> æ­¥æ•°
  0  5ä¸‡ 10ä¸‡ 15ä¸‡ 20ä¸‡
```

#### å®é™…è¡¨ç°ï¼ˆ50000 æ­¥è®­ç»ƒï¼‰

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **è®­ç»ƒæ­¥æ•°** | 50,000 | çº¦éœ€ 15 åˆ†é’Ÿ |
| **æˆåŠŸç‡** | 100% | 3/3 æµ‹è¯•å›åˆå…¨éƒ¨æˆåŠŸ |
| **å¹³å‡æ­¥æ•°** | 87.7 | (50 + 142 + 71) / 3 |
| **æœ€ä½³è¡¨ç°** | 50 æ­¥ | ç¬¬ 1 å›åˆ |
| **FPS** | 3,000+ | è®­ç»ƒé€Ÿåº¦ï¼ˆæ­¥/ç§’ï¼‰|

### æµ‹è¯•æ¡ˆä¾‹åˆ†æ



#### ğŸ† å›åˆ 1ï¼ˆä¼˜ç§€ï¼‰

```
æ­¥æ•°: 50
è·ç¦»å˜åŒ–: 0.44m â†’ 0.30m â†’ 0.17m â†’ 0.23m (æ¥è§¦)
å¥–åŠ±: -67.61
ç‰¹ç‚¹: å¿«é€Ÿç›´è¾¾ï¼Œç•¥æœ‰æ‘†åŠ¨
```

#### âš ï¸ å›åˆ 2ï¼ˆéœ€ä¼˜åŒ–ï¼‰

```
æ­¥æ•°: 142
è·ç¦»å˜åŒ–: èµ·ä¼è¾ƒå¤§ï¼Œåœ¨ 0.15m - 0.55m é—´æŒ¯è¡
å¥–åŠ±: -446.00
ç‰¹ç‚¹: åå¤è¯•æ¢ï¼Œæœ€ç»ˆæˆåŠŸ
```

#### âœ… å›åˆ 3ï¼ˆè‰¯å¥½ï¼‰

```
æ­¥æ•°: 71
è·ç¦»å˜åŒ–: 0.56m â†’ 0.27m â†’ 0.11m (æ¥è§¦)
å¥–åŠ±: -160.63
ç‰¹ç‚¹: æ¸è¿›å¼æ¥è¿‘ï¼Œè¾ƒå¹³æ»‘
```

### æ€§èƒ½ä¼˜åŒ–ç©ºé—´

å½“å‰æ¨¡å‹ï¼ˆ50,000 æ­¥ï¼‰å·²ç»å¯ç”¨ï¼Œä½†è¿˜æœ‰æå‡ç©ºé—´ï¼š

1. **ç»§ç»­è®­ç»ƒ** â†’ 200,000 æ­¥å¯è¾¾åˆ°æ›´é«˜ç¨³å®šæ€§
2. **è°ƒæ•´å¥–åŠ±æƒé‡** â†’ å‡å°‘æŒ¯è¡
3. **å¢åŠ åŠ¨ä½œå¹³æ»‘æƒ©ç½š** â†’ æ›´ä¼˜é›…çš„è½¨è¿¹

---

## â“ å¸¸è§é—®é¢˜

### Q1: è®­ç»ƒå¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ

**A**: 
- âœ… ä½¿ç”¨ GPU/MPS åŠ é€Ÿï¼ˆPyTorch è‡ªåŠ¨æ£€æµ‹ï¼‰
- âœ… é™ä½ `n_steps`ï¼ˆå¦‚ 1024ï¼‰å‡å°‘å†…å­˜å ç”¨
- âœ… å…³é—­ä¸å¿…è¦çš„åå°ç¨‹åº
- âœ… ä½¿ç”¨ DIRECT æ¨¡å¼è€Œé GUI æ¨¡å¼è®­ç»ƒ

### Q2: æˆåŠŸç‡ä¸é«˜æ€ä¹ˆåŠï¼Ÿ

**A**:
1. **å¢åŠ è®­ç»ƒæ­¥æ•°** â†’ è‡³å°‘ 150,000 æ­¥
2. **æ£€æŸ¥å¥–åŠ±å‡½æ•°** â†’ ç¡®ä¿é¼“åŠ±æ­£ç¡®è¡Œä¸º
3. **è°ƒæ•´å­¦ä¹ ç‡** â†’ å°è¯• 1e-4 æˆ– 5e-4
4. **å¢åŠ æ¢ç´¢** â†’ æé«˜ `ent_coef` åˆ° 0.02

### Q3: æ¨¡å‹æ–‡ä»¶åœ¨å“ªï¼Ÿ

**A**:
```
é¡¹ç›®ç›®å½•/
â”œâ”€â”€ ppo_arm_final.zip      â† æœ€ç»ˆæ¨¡å‹ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ vec_normalize.pkl      â† å½’ä¸€åŒ–å‚æ•°ï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ checkpoints/
    â””â”€â”€ ppo_arm_*_steps.zip â† ä¸­é—´æ£€æŸ¥ç‚¹
```

### Q4: GUI çª—å£æ‰“ä¸å¼€ï¼Ÿ

**A**:
- macOS: ç¡®ä¿å…è®¸ç»ˆç«¯è®¿é—®å±å¹•å½•åˆ¶
- Linux: å®‰è£… `sudo apt-get install python3-opengl`
- æ— å¤´æœåŠ¡å™¨: ä½¿ç”¨ `--train` æ¨¡å¼ï¼ˆè‡ªåŠ¨ DIRECTï¼‰

### Q5: å¯¼å…¥é”™è¯¯æ€ä¹ˆåŠï¼Ÿ

**A**:
```bash
# é‡æ–°å®‰è£…æ‰€æœ‰ä¾èµ–
pip uninstall pybullet stable-baselines3 gymnasium -y
pip install pybullet stable-baselines3 gymnasium
```

### Q6: å¦‚ä½•åŠ é€Ÿæµ‹è¯•æ¼”ç¤ºï¼Ÿ

**A**: ä¿®æ”¹ `rl_train.py` ç¬¬ 234 å’Œ 479 è¡Œï¼š

```python
# æ›´å¿«
time.sleep(1/240)  # æˆ– time.sleep(0.01)

# æ›´æ…¢ï¼ˆå½“å‰ï¼‰
time.sleep(1/60)   # æˆ– time.sleep(0.03)
```

### Q7: èƒ½åœ¨ Windows ä¸Šè¿è¡Œå—ï¼Ÿ

**A**: 
âœ… å®Œå…¨æ”¯æŒï¼åªéœ€æ³¨æ„ï¼š
- ä½¿ç”¨ `python` è€Œé `python3`
- è·¯å¾„ä½¿ç”¨åæ–œæ  `\` æˆ–æ­£æ–œæ  `/`
- æ¿€æ´»ç¯å¢ƒ: `venv\Scripts\activate`

---

## ğŸš€ è¿›é˜¶ä¼˜åŒ–

### è‡ªå®šä¹‰å¥–åŠ±å‡½æ•°

ç¼–è¾‘ `rl_train.py` çš„ `_compute_reward` æ–¹æ³•ï¼š

```python
def _compute_reward(self):
    info = {}
    distance = self._get_distance_to_target()
    
    # ğŸ¯ è‡ªå®šä¹‰ï¼šè·ç¦»å¥–åŠ±æƒé‡
    distance_reward = -distance * 15.0  # å¢å¤§åˆ° 15
    
    # ğŸ¯ è‡ªå®šä¹‰ï¼šåŠ¨ä½œå¹³æ»‘æƒ©ç½š
    if hasattr(self, 'prev_action'):
        action_change = np.sum(np.abs(self.current_action - self.prev_action))
        action_penalty = -action_change * 5.0
    else:
        action_penalty = 0.0
    
    # ... å…¶ä»–å¥–åŠ±è®¡ç®—
    
    reward = distance_reward + progress_reward + contact_reward + action_penalty
    return reward, info
```

### è°ƒæ•´ PPO å‚æ•°

```python
model = PPO(
    "MlpPolicy",
    env,
    learning_rate=3e-4,        # ğŸ”§ å­¦ä¹ ç‡
    n_steps=2048,              # ğŸ”§ æ¯æ¬¡æ›´æ–°çš„æ­¥æ•°
    batch_size=64,             # ğŸ”§ å°æ‰¹é‡å¤§å°
    n_epochs=10,               # ğŸ”§ æ¯æ¬¡æ›´æ–°çš„è®­ç»ƒè½®æ•°
    gamma=0.99,                # ğŸ”§ æŠ˜æ‰£å› å­
    gae_lambda=0.95,           # ğŸ”§ GAE å‚æ•°
    clip_range=0.2,            # ğŸ”§ è£å‰ªèŒƒå›´
    ent_coef=0.01,             # ğŸ”§ ç†µç³»æ•°ï¼ˆæ¢ç´¢åº¦ï¼‰
    vf_coef=0.5,               # ğŸ”§ ä»·å€¼å‡½æ•°ç³»æ•°
    max_grad_norm=0.5,         # ğŸ”§ æ¢¯åº¦è£å‰ª
    verbose=1
)
```

### ç½‘ç»œæ¶æ„è‡ªå®šä¹‰

```python
from stable_baselines3 import PPO
from torch import nn

# è‡ªå®šä¹‰ç½‘ç»œ
policy_kwargs = dict(
    net_arch=[dict(pi=[256, 256], vf=[256, 256])],  # ä¸¤å±‚ 256 ç¥ç»å…ƒ
    activation_fn=nn.ReLU
)

model = PPO(
    "MlpPolicy",
    env,
    policy_kwargs=policy_kwargs,
    # ... å…¶ä»–å‚æ•°
)
```

### å¤šç¯å¢ƒå¹¶è¡Œè®­ç»ƒ

```python
from stable_baselines3.common.vec_env import SubprocVecEnv

# åˆ›å»º 4 ä¸ªå¹¶è¡Œç¯å¢ƒ
def make_env():
    return ArmReachEnv(render_mode=None, max_steps=500)

env = SubprocVecEnv([make_env for _ in range(4)])
env = VecNormalize(env, norm_obs=True, norm_reward=True)

# è®­ç»ƒé€Ÿåº¦æå‡çº¦ 3-4 å€
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
pybullt/
â”œâ”€â”€ rl_train.py              # ä¸»è®­ç»ƒè„šæœ¬ï¼ˆæ ¸å¿ƒï¼‰
â”œâ”€â”€ test2.py                 # æ‰‹åŠ¨æ§åˆ¶æ¼”ç¤º
â”œâ”€â”€ test_model.sh            # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_slow.py             # æ…¢é€Ÿæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ RL_README.md             # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ ppo_arm_final.zip        # è®­ç»ƒå¥½çš„æ¨¡å‹
â”œâ”€â”€ vec_normalize.pkl        # å½’ä¸€åŒ–å‚æ•°
â”‚
â”œâ”€â”€ checkpoints/             # è®­ç»ƒæ£€æŸ¥ç‚¹
â”‚   â”œâ”€â”€ ppo_arm_10000_steps.zip
â”‚   â”œâ”€â”€ ppo_arm_20000_steps.zip
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ ppo_arm_tensorboard/     # TensorBoard æ—¥å¿—
    â””â”€â”€ PPO_*/
        â””â”€â”€ events.out.tfevents.*
```

### æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | å¤§å° | è¯´æ˜ |
|------|------|------|
| `rl_train.py` | ~20 KB | åŒ…å«ç¯å¢ƒå®šä¹‰ã€è®­ç»ƒã€æµ‹è¯•å…¨æµç¨‹ |
| `ppo_arm_final.zip` | ~150 KB | ç¥ç»ç½‘ç»œæƒé‡ |
| `vec_normalize.pkl` | ~5 KB | è§‚å¯Ÿ/å¥–åŠ±å½’ä¸€åŒ–å‚æ•° |

---

## ğŸ“ ç›¸å…³èµ„æº

### è®ºæ–‡

- [Proximal Policy Optimization Algorithms](https://arxiv.org/abs/1707.06347) - Schulman et al., 2017
- [PyBullet, a Python module for physics simulation](https://pybullet.org/wordpress/)

### æ–‡æ¡£

- [Stable-Baselines3 Documentation](https://stable-baselines3.readthedocs.io/)
- [PyBullet Quickstart Guide](https://docs.google.com/document/d/10sXEhzFRSnvFcl3XxNGhnD4N2SedqwdAvK3dsihxVUA/)
- [Gymnasium Documentation](https://gymnasium.farama.org/)

### æ•™ç¨‹

- [Deep RL Course by Hugging Face](https://huggingface.co/learn/deep-rl-course/)
- [PyBullet Examples](https://github.com/bulletphysics/bullet3/tree/master/examples/pybullet)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-14)

- âœ… åˆå§‹å‘å¸ƒ
- âœ… PPO è®­ç»ƒæµç¨‹
- âœ… GUI å¯è§†åŒ–
- âœ… æ…¢é€Ÿæ¼”ç¤ºæ¨¡å¼
- âœ… è‡ªåŠ¨æ£€æŸ¥ç‚¹ä¿å­˜
- âœ… TensorBoard é›†æˆ
- âœ… å®Œæ•´æ–‡æ¡£

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘è®¡åˆ’

- [ ] æ·»åŠ æ›´å¤šæœºæ¢°è‡‚æ¨¡å‹ï¼ˆ4-DoF, 6-DoFï¼‰
- [ ] å®ç°éšœç¢ç‰©é¿è®©
- [ ] æ”¯æŒå¤šç›®æ ‡ä»»åŠ¡
- [ ] æ·»åŠ æ‘„åƒå¤´è§†è§‰è¾“å…¥
- [ ] é›†æˆçœŸå®æœºæ¢°è‡‚ç¡¬ä»¶æ¥å£

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ’¡ è‡´è°¢

- PyBullet å›¢é˜Ÿæä¾›ä¼˜ç§€çš„ç‰©ç†å¼•æ“
- Stable-Baselines3 å›¢é˜Ÿçš„ RL æ¡†æ¶
- OpenAI çš„ Gymnasium æ ‡å‡†æ¥å£

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**

Made with â¤ï¸ by [Your Name]

</div>
